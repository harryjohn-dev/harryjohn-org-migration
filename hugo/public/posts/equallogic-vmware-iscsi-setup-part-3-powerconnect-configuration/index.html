<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>EqualLogic VMware iSCSI Setup -- Part 3: PowerConnect Configuration | Harry John</title>
<meta name="keywords" content="equallogic, iscsi, vmware, san, networking, dell, powerconnect, switches">
<meta name="description" content="
So, recently I configured a set of PowerConnect 7048 switches for iSCSI following all the standards and best practices I could find. Actually I had prepared the PowerConnect iSCSI configuration a few months ago, I have been waiting for the Dell experts to confirm the configuration is current best practice and fit for our environment.
Configuring any PowerConnect model is a very similar process, however you must check the switch documentation you downloaded from the portal on part 1 of this guide &ndash; there may be a few minor differences. I will note now that PowerConnect 5524/5548 switches are not approved for use in an iSCSI environment and that iSCSI Optimisation should actually be disabled on these switches.">
<meta name="author" content="Harry John">
<link rel="canonical" href="http://localhost:1313/posts/equallogic-vmware-iscsi-setup-part-3-powerconnect-configuration/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css" integrity="sha256-j&#43;ECM6cGvIfy4Is8&#43;XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/equallogic-vmware-iscsi-setup-part-3-powerconnect-configuration/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Harry John (Alt + H)">Harry John</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      EqualLogic VMware iSCSI Setup -- Part 3: PowerConnect Configuration
    </h1>
    <div class="post-meta"><span title='2013-12-30 00:00:00 +0000 UTC'>December 30, 2013</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;933 words&nbsp;·&nbsp;Harry John

</div>
  </header> 
  <div class="post-content"><p><img alt="PowerConnect 7048 Switch" loading="lazy" src="/images/34017.jpg"></p>
<p>So, recently I configured a set of PowerConnect 7048 switches for iSCSI following all the standards and best practices I could find. Actually I had prepared the PowerConnect iSCSI configuration a few months ago, I have been waiting for the Dell experts to confirm the configuration is current best practice and fit for our environment.</p>
<p>Configuring any PowerConnect model is a very similar process, however you must check the switch documentation you downloaded from the portal on part 1 of this guide &ndash; there may be a few minor differences. I will note now that PowerConnect 5524/5548 switches are not approved for use in an iSCSI environment and that iSCSI Optimisation should actually be disabled on these switches.</p>
<p>If you are using a non-PowerConnect set of switches, there are a list of switch requirements within the <a href="http://en.community.dell.com/techcenter/storage/w/wiki/2639.equallogic-configuration-guide.aspx">Dell EqualLogic Configuration Guide as of v14.3</a> &ndash; this document does get updated frequently (on a quarterly basis to be precise) and has been much improved recently. I highly recommend reviewing this document fully as most of the information you need is now well documented here.</p>
<h2 id="iscsi-setup-best-practices">iSCSI Setup Best Practices<a hidden class="anchor" aria-hidden="true" href="#iscsi-setup-best-practices">#</a></h2>
<p><strong>My goals when configuring these switchers were to:</strong></p>
<ol>
<li>have a completely isolated iSCSI network</li>
<li>follow all best practices where possible</li>
<li>use the Out-of-Band (OOB) interface for switch management</li>
<li>add a new VMware VM Network port group to the iSCSI virtual network and use this for the SAN HQ server monitoring and management</li>
</ol>
<p><strong>Also, the switch features we need to enable for iSCSI best practice are as follows:</strong></p>
<ul>
<li>Flow control</li>
<li>Jumbo frames</li>
<li>Portfast</li>
<li>Storm control</li>
<li>Non default VLAN</li>
</ul>
<h2 id="equallogic-san-infrastructure-best-practices">EqualLogic SAN Infrastructure Best Practices<a hidden class="anchor" aria-hidden="true" href="#equallogic-san-infrastructure-best-practices">#</a></h2>
<p>The following excerpt is from the <a href="https://www.google.co.uk/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=2&amp;cad=rja&amp;ved=0CEkQFjAB&amp;url=http%3A%2F%2Fen.community.dell.com%2Fdell-groups%2Fdtcmedia%2Fm%2Fmediagallery%2F19852516%2Fdownload.aspx&amp;ei=CojBUvHVNoiohAe2v4DQCw&amp;usg=AFQjCNFmLxa1fyg3c9SbaryjGUnuJR6nYA&amp;bvm=bv.58187178,d.ZG4">Dell EqualLogic Configuration Guide v14.3</a>, I have picked a few of the most important/least obvious best practices however I would still recommended you read through the entire list:</p>
<ul>
<li>It is strongly recommended that a physically separated network be used for iSCSI traffic and that this network not be shared with other traffic types.</li>
<li>Rapid Spanning Tree Protocol must be enabled if the SAN infrastructure has more than two switches in a non-stacked configuration, and portfast must be enabled on all edge device ports (hosts, FS Series appliances and arrays).</li>
<li>All switches within the SAN must be interconnected such that there is always a path from any Ethernet port on one array to all other Ethernet ports on all other arrays in the group.</li>
<li>All switches and host network controllers within the infrastructure must have (at a minimum, receive) flow control enabled for optimal performance.</li>
<li>Take advantage of your switch&rsquo;s VLAN capabilities. You may optionally create a VLAN dedicated to iSCSI traffic (even on dedicated switches). If necessary, create a second VLAN for management traffic. The actual VLAN configuration of your iSCSI SAN will be dictated by your SAN network design requirements and the features of the iSCSI SAN switches being used.</li>
<li>Jumbo frames should be enabled for best performance. If you choose to use jumbo frames then all nodes in the SAN fabric must have jumbo frames enabled.</li>
<li>For best performance and reliability, we recommend that all interconnection paths between non-stacking switches (LAGs) use a dynamic link aggregation protocol such as LACP</li>
</ul>
<h2 id="powerconnect-7048-iscsi-configuration">PowerConnect 7048 iSCSI Configuration<a hidden class="anchor" aria-hidden="true" href="#powerconnect-7048-iscsi-configuration">#</a></h2>
<p>Below are the exact configuration steps I took to install my PowerConnect 7048s. Please note all environments vary &ndash; you should refer to the documents mentioned in the preparation section of this guide and ensure you follow the appropriate steps for your specific hardware.</p>
<p><strong>Step 1:</strong> Enter configuration mode<br>
<code>enable</code><br>
<code>configure</code></p>
<p><strong>Step 2:</strong> Configure management network<br>
<code>interface out-of-band</code><br>
<code>ip address 172.16.0.101</code><br>
<code>exit</code></p>
<p><strong>Step 3:</strong> Configure management security<br>
<code>line telnet</code><br>
<code>login authentication default</code><br>
<code>password [password]</code><br>
<code>exit</code><br>
<code>ip http authentication local</code><br>
<code>username admin password [password] privilege 15</code></p>
<p><strong>Step 4:</strong> Enable iSCSI Optimisation and flow control<br>
<code>iscsi enable</code><br>
<code>flowcontrol</code></p>
<p><strong>Step 5:</strong> Add iSCSI VLAN<br>
<code>vlan database</code><br>
<code>vlan 100</code><br>
<code>exit</code><br>
<code>interface vlan 100</code><br>
<code>name iSCSI</code><br>
<code>exit</code></p>
<p><strong>Step 6:</strong> Enable jumbo frames, Portfast and storm control<br>
<code>interface range Gigabitethernet all</code><br>
<code>switchport access vlan 100</code><br>
<code>mtu 9216</code><br>
<code>spanning-tree portfast</code><br>
<code>no storm-control unicast</code><br>
<code>storm-control multicast</code><br>
<code>storm-control broadcast</code><br>
<code>exit</code><br>
<code>exit</code></p>
<p><strong>Step 7:</strong> Save config and reboot<br>
<code>copy running-config startup-config</code><br>
<code>reload</code></p>
<h2 id="powerconnect-iscsi-stack-vs-lag">PowerConnect iSCSI Stack vs LAG<a hidden class="anchor" aria-hidden="true" href="#powerconnect-iscsi-stack-vs-lag">#</a></h2>
<p>Whilst multi-pathing will manage the paths between the hosts and arrays without an Inter-Switch Link (ISL), it is important that there is sufficient inter-switch bandwidth as the EqualLogic arrays are quite chatty and can produce a lot of network traffic between themselves, especially when performance and capacity load balancing are enabled with more than one array. As mentioned above in the list of best practices, all the switches in the SAN must interconnect.</p>
<p>The real question is whether you choose to interconnect by means of stacking or creating a Link Aggregate Group (LAG). There are some pros and cons of both:</p>
<h3 id="stacking">Stacking<a hidden class="anchor" aria-hidden="true" href="#stacking">#</a></h3>
<p><strong>Advantages:</strong></p>
<ul>
<li>Simpler to implement</li>
<li>Easier to manage multiple switches as a single switch</li>
<li>Possibly higher bandwidth and lower latency than using link aggregation and Ethernet</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li>Cannot interconnect switches from different vendors</li>
<li>Increases cost of switch</li>
<li>Must schedule downtime when upgrading firmware as you cannot upgrade on each switch independently</li>
</ul>
<h3 id="lag">LAG<a hidden class="anchor" aria-hidden="true" href="#lag">#</a></h3>
<p><strong>Advantages:</strong></p>
<ul>
<li>Can interconnect switches from different vendors</li>
<li>Cheaper cost of switch</li>
<li>Can upgrade switch firmware on each switch independently &ndash; no maintenance downtime</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li>Some solutions limited to eight port link aggregation group (8Gbps)</li>
<li>Spanning tree protocol must be used if more than two switches are used &ndash; causes some links to be &ldquo;blocked&rdquo; and reduces bandwidth availability</li>
<li>Possibly less bandwidth than stacking</li>
<li>More complex to implement</li>
</ul>
<p><a href="/posts/equallogic-vmware-iscsi-setup-part-1-preparation/">EqualLogic VMware iSCSI Setup &ndash; Part 1: Preparation</a><br>
<a href="/posts/equallogic-vmware-iscsi-setup-part-2-network/">EqualLogic VMware iSCSI Setup &ndash; Part 2: Network Configuration</a><br>
<strong>EqualLogic VMware iSCSI Setup &ndash; Part 3: PowerConnect Configuration</strong></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/equallogic/">Equallogic</a></li>
      <li><a href="http://localhost:1313/tags/iscsi/">Iscsi</a></li>
      <li><a href="http://localhost:1313/tags/vmware/">Vmware</a></li>
      <li><a href="http://localhost:1313/tags/san/">San</a></li>
      <li><a href="http://localhost:1313/tags/networking/">Networking</a></li>
      <li><a href="http://localhost:1313/tags/dell/">Dell</a></li>
      <li><a href="http://localhost:1313/tags/powerconnect/">Powerconnect</a></li>
      <li><a href="http://localhost:1313/tags/switches/">Switches</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Harry John</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
