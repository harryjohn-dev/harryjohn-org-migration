<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>EqualLogic VMware iSCSI Setup -- Part 2: Network Configuration | Harry John</title>
<meta name="keywords" content="equallogic, iscsi, vmware, san, networking, dell, powerconnect">
<meta name="description" content="
The EqualLogic iSCSI network consists of the switches, EqualLogic arrays and ESX hosts, all of which need configuring properly to make the most of each others load balancing, performance and availability features. In terms of the network fabric, there are a few things we need to consider:

High availability &ndash; multiple links and switches to provide redundancy
Performance &ndash; elimination of bottlenecks
Management &ndash; monitoring and management network

This guide can apply to a range of hardware as long as we are using EqualLogic arrays and VMware ESX/ESXi hosts. The switches can be Dell or Cisco for example, as long as they are on the Dell Approved Hardware list. The hardware I used when making this guide is as follows:">
<meta name="author" content="Harry John">
<link rel="canonical" href="http://localhost:1313/posts/equallogic-vmware-iscsi-setup-part-2-network/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css" integrity="sha256-j&#43;ECM6cGvIfy4Is8&#43;XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/equallogic-vmware-iscsi-setup-part-2-network/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Harry John (Alt + H)">Harry John</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      EqualLogic VMware iSCSI Setup -- Part 2: Network Configuration
    </h1>
    <div class="post-meta"><span title='2013-02-26 00:00:00 +0000 UTC'>February 26, 2013</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;514 words&nbsp;·&nbsp;Harry John

</div>
  </header> 
  <div class="post-content"><p><img alt="SAN LAN Network" loading="lazy" src="/images/SAN-LAN-Network-e1361849167569.png"></p>
<p>The EqualLogic iSCSI network consists of the switches, EqualLogic arrays and ESX hosts, all of which need configuring properly to make the most of each others load balancing, performance and availability features. In terms of the network fabric, there are a few things we need to consider:</p>
<ol>
<li>High availability &ndash; multiple links and switches to provide redundancy</li>
<li>Performance &ndash; elimination of bottlenecks</li>
<li>Management &ndash; monitoring and management network</li>
</ol>
<p>This guide can apply to a range of hardware as long as we are using EqualLogic arrays and VMware ESX/ESXi hosts. The switches can be Dell or Cisco for example, as long as they are on the Dell Approved Hardware list. The hardware I used when making this guide is as follows:</p>
<ul>
<li>2 x PowerConnect 7048</li>
<li>6 x PowerEdge R710</li>
<li>2 x EqualLogic PS6000</li>
</ul>
<p>Here is some brief detail about my hardware specifications, and how I put the key design considerations mentioned earlier into practice when configuring each component.</p>
<h2 id="equallogic-ps6000-array-members">EqualLogic PS6000 array members<a hidden class="anchor" aria-hidden="true" href="#equallogic-ps6000-array-members">#</a></h2>
<p><em>4 GbE ports/ controller</em><br>
<em>2 controllers/member (active passive)</em></p>
<p>I will mention management first as the PS6000 does not have a dedicated management port. I <em>could</em> dedicate one of the four Ethernet ports to management only but this would leave me with three links for iSCSI &ndash; two to switch A but <strong>only one link to the other switch B</strong>. In the case of a switch failure, we could have <strong>33% available iSCSI bandwidth compared to normal conditions</strong>.</p>
<p>For this reason I opted for all four ethernet ports to serve both iSCSI and management for the members, I will configure a VM with SAN HQ on the iSCSI network for monitoring and email reporting.</p>
<h2 id="powerconnect-7048-iscsi-switches">PowerConnect 7048 iSCSI switches<a hidden class="anchor" aria-hidden="true" href="#powerconnect-7048-iscsi-switches">#</a></h2>
<p><em>Stacking modules</em></p>
<p>Two switches in a stack will keep the network alive in the case of a switch PSU or complete failure &ndash; you could also add redundant PSU to the switches for extra protection. With the stacking modules we have a fast Inter-Switch Link (ISL) &ndash; whether you LAG or stack you need to make sure this link is fast as iSCSI traffic can and will traverse the ISL. I will mention the pros and cons of LAG vs stack in the switch configuration part of this guide.</p>
<p>The 7048 switches have a high port buffer memory and are approved EqualLogic iSCSI switches, flow control and all the other iSCSI goodies are available. These switches also have an Out-of-Band management port each and these will be connected to our LAN network to give us management access to the switches.</p>
<h2 id="vmware-esxi-51-hosts">VMware ESXi 5.1 hosts<a hidden class="anchor" aria-hidden="true" href="#vmware-esxi-51-hosts">#</a></h2>
<p><em>Dell PowerEdge R710</em><br>
<em>2 GbE NICs for iSCSI data</em></p>
<p>[Two NICs per host is a <strong>requirement</strong> for multipathing to work properly and allow the hosts and EqualLogics to load balance. You can add more NICs in pairs if your network utilisation is high.]</p>
<p>Now we have our EqualLogic VMware iSCSI network designed to best practice we can move on to look at the PowerConnect switch configuration.</p>
<p><a href="/posts/equallogic-vmware-iscsi-setup-part-1-preparation/">EqualLogic VMware iSCSI Setup &ndash; Part 1: Preparation</a><br>
<strong>EqualLogic VMware iSCSI Setup &ndash; Part 2: Network Configuration</strong><br>
<a href="/posts/equallogic-vmware-iscsi-setup-part-3-powerconnect-configuration/">EqualLogic VMware iSCSI Setup &ndash; Part 3: PowerConnect Configuration</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/equallogic/">Equallogic</a></li>
      <li><a href="http://localhost:1313/tags/iscsi/">Iscsi</a></li>
      <li><a href="http://localhost:1313/tags/vmware/">Vmware</a></li>
      <li><a href="http://localhost:1313/tags/san/">San</a></li>
      <li><a href="http://localhost:1313/tags/networking/">Networking</a></li>
      <li><a href="http://localhost:1313/tags/dell/">Dell</a></li>
      <li><a href="http://localhost:1313/tags/powerconnect/">Powerconnect</a></li>
    </ul>
  </footer><div class="comments">
  <h3>Comments</h3>
  <div class="comment-list"><div class="comment">
      <div class="comment-author">
        <img src="http://0.gravatar.com/avatar/00000000000000000000000000000000?s=40&amp;d=mm&amp;r=g" alt="Anonymous" class="avatar" />
        <strong>Anonymous</strong>
        <span class="comment-date">December 15, 2013 at 8:30 pm</span>
      </div>
      <div class="comment-content"><p>Great article, very helpful for setting up iSCSI.</p></div></div><div class="comment">
      <div class="comment-author">
        <img src="http://1.gravatar.com/avatar/11111111111111111111111111111111?s=40&amp;d=mm&amp;r=g" alt="NetworkAdmin" class="avatar" />
        <strong>NetworkAdmin</strong>
        <span class="comment-date">December 16, 2013 at 10:15 am</span>
      </div>
      <div class="comment-content"><p>This helped me configure my Dell switches correctly.</p></div></div><div class="comment">
      <div class="comment-author">
        <img src="http://2.gravatar.com/avatar/22222222222222222222222222222222?s=40&amp;d=mm&amp;r=g" alt="VMwareUser" class="avatar" />
        <strong>VMwareUser</strong>
        <span class="comment-date">December 17, 2013 at 2:45 pm</span>
      </div>
      <div class="comment-content"><p>Excellent step-by-step guide. The network configuration section was particularly clear.</p></div></div></div>
</div>

<style>
.comments {
  margin-top: 2rem;
  padding-top: 2rem;
  border-top: 1px solid var(--border);
}

.comments h3 {
  margin-bottom: 1rem;
  color: var(--primary);
}

.comment {
  margin-bottom: 1.5rem;
  padding: 1rem;
  background: var(--entry);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.comment-replies {
  margin-left: 2rem;
  margin-top: 1rem;
}

.comment.reply {
  background: var(--theme);
  border: 1px solid var(--border);
}

.comment-author {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
}

.comment-date {
  color: var(--secondary);
  font-size: 0.9rem;
}

.comment-content {
  line-height: 1.5;
}

.comment-content p {
  margin: 0.3rem 0;
}
</style>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Harry John</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
